<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  </head>
  <body>
    <script>
      t=0,draw=$=>{
  // 1. Setup Canvas and Scale Factor
  t||createCanvas(W=windowWidth, H=windowHeight);
  S = min(W, H) / 400; // This calculates how much bigger your screen is than 400px
  
  mX=W/2, mY=H/2;
  clear();

  // Changed i>8 and i^8 to accommodate 8-sided symmetry (PI/4)
  for(t+=PI/180, i=2e4; i--;)
    i>8 ? (
      d = 7 * cos(mag(k=i%25-12, e=i/800)/3 + t/2),
      // 2. Multiply coordinates by S to scale the drawing
      point(
        (k*4 + d*k*sin(d+e/9+t)) * S + mX, 
        (e*2 - d*9 - d*9*cos(d+t)) * S + mY
      )
    ) : i^8 ? 
      rotate(PI/4).image(p, -mX, -mY) : 
      (p=get()) + stroke(255, 150).background(9).translate(mX, mY)

  // FPS Counter - Using push/pop to prevent affecting the animation stroke
  push();
  resetMatrix();
  fill(255);
  noStroke();
  textSize(16);
  text("FPS: " + floor(frameRate()), 10, 20);
  pop();
}

function windowResized() { resizeCanvas(windowWidth, windowHeight); }


    </script>
  </body>
</html>

